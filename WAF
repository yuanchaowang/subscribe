<mxfile host="app.diagrams.net" modified="2021-03-03T05:37:34.672Z" agent="5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36" etag="IXkQ6CSzos_16sZ-f90S" version="14.4.3" type="github">
  <diagram id="8HKc-W3P3JSvCGIpSu3j" name="第 1 页">
    <mxGraphModel dx="1322" dy="564" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="C05fBz_bVQlYOVFkHr-l-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-1" target="C05fBz_bVQlYOVFkHr-l-2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="405" y="253" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-19" value="5、根据B在(4)的请求，浏览器带着(2)产生的Cookie访问A" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-18">
          <mxGeometry x="-0.0968" y="1" relative="1" as="geometry">
            <mxPoint x="20" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-1" target="C05fBz_bVQlYOVFkHr-l-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="405" y="368" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-21" value="3、在用户没有登出A网站情况下，防伪恶意网站B" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-20">
          <mxGeometry x="-0.1871" y="3" relative="1" as="geometry">
            <mxPoint x="34" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-1" value="&lt;font size=&quot;3&quot;&gt;浏览器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="170" width="120" height="280" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="250" y="225" as="targetPoint" />
            <Array as="points">
              <mxPoint x="360" y="225" />
              <mxPoint x="360" y="225" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-17" value="2、验证通过，在用户浏览器端产生A的Cookie" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-16">
          <mxGeometry x="0.6538" y="-1" relative="1" as="geometry">
            <mxPoint x="103" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-2" value="&lt;font style=&quot;font-size: 18px&quot;&gt;网站A&lt;br&gt;(受信任)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="170" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.05;entryY=0.804;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-3" target="C05fBz_bVQlYOVFkHr-l-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-23" value="4、B要求访问第三方网站A，发出一个请求" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-22">
          <mxGeometry x="0.6251" relative="1" as="geometry">
            <mxPoint x="85.75" y="-0.11" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-3" value="&lt;font size=&quot;3&quot;&gt;网站B&lt;br&gt;(恶意)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="340" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-4" value="" style="endArrow=classic;html=1;exitX=1.017;exitY=0.139;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.008;entryY=0.2;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="C05fBz_bVQlYOVFkHr-l-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="252.99999999999997" y="189.99999999999994" as="sourcePoint" />
            <mxPoint x="509.99999999999994" y="193.09999999999997" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-15" value="&lt;div style=&quot;text-align: justify&quot;&gt;1、浏览并且登录信任网站A&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-4">
          <mxGeometry x="-0.3121" relative="1" as="geometry">
            <mxPoint x="29.01" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-9" value="用户C" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="30" y="240" width="60" height="120" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-25" value="CSRF" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="770" y="290" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-30" value="6、因为浏览器会带上用户C的Cookie，站点A&lt;br&gt;不知道步骤5请求是B发出的，所以站点A会根&lt;br&gt;据用户C的权限处理步骤5的请求，这样B就达&lt;br&gt;到了伪造用户C请求的目的" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;" vertex="1" parent="1">
          <mxGeometry x="469" y="95" width="251" height="60" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-31" target="C05fBz_bVQlYOVFkHr-l-33">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="347" y="583" />
              <mxPoint x="347" y="583" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-36" value="3、通过站点A可以访问到资源M" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=17;" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-35">
          <mxGeometry x="-0.0889" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=17;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-31" target="C05fBz_bVQlYOVFkHr-l-34">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="327" y="753" />
              <mxPoint x="327" y="753" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-31" value="&lt;font size=&quot;3&quot;&gt;浏览器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="126" y="528" width="120" height="280" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-32" value="用户C" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="26" y="598" width="60" height="120" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-33" value="&lt;span style=&quot;font-size: 18px&quot;&gt;站点A&lt;br&gt;(资源站点)&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="606" y="528" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1.008;entryY=0.707;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=17;" edge="1" parent="1" source="C05fBz_bVQlYOVFkHr-l-34" target="C05fBz_bVQlYOVFkHr-l-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-43" value="2、站点B返回资源M的地址（站点A内）" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=17;" vertex="1" connectable="0" parent="C05fBz_bVQlYOVFkHr-l-42">
          <mxGeometry x="0.3572" y="-3" relative="1" as="geometry">
            <mxPoint x="66.19" y="-0.98" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-34" value="&lt;font size=&quot;3&quot;&gt;站点B&lt;br&gt;(盗链站点)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="606" y="698" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-38" value="1、访问站点B的资源M" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=17;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="417" y="753" as="geometry">
            <mxPoint x="2" y="-5" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C05fBz_bVQlYOVFkHr-l-45" value="客户以为是从站点B访问的资源M，&lt;br&gt;其实消耗的是站点A的带宽资源" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=17;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="429" y="524" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
